I wanted an easy way to copy-paste a thread preemption check throughout my code, since preemption happens in many ways (priority changes, lock releases). For this reason I encapsulated the preemption check + the actual preemption within thread_preempt().
